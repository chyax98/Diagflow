---
type: diagram
description: Ditaa 通用图表，通过 ASCII 字符绘制框图、流程图和架构图
use_cases:
  - 系统架构图
  - 数据流程图
  - 组件关系图
  - 网络拓扑图
  - 技术文档配图
  - 简单 UML 图表
---

## 核心语法
- 矩形框: +----+ 或 /----\（顶部） \----/（底部），用 - 和 | 绘制边框
- 圆角矩形: /----\ 和 \----/ 组合使用
- 虚线框: 用 : 或 = 代替 - 和 |，如 :----:
- 箭头: --> 或 <-- 或 <--> 或 ==> 或 o--> 等，自动识别方向
- 文本: 直接写在框内，Ditaa 会自动居中
- 连接线: 用 - | + 绘制连接，交叉点用 + 标记
- 项目符号: o XXXXX 格式，o 会渲染成圆点

特殊标记（在框内使用）：
- {d} - 文档图标（Document），渲染为右上角折叠的文档外观
- {s} - 存储图标（Storage），渲染为圆柱体，适合表示数据库
- {c} - 虚线框（Conditional/Choice），用于条件判断节点
- {io} - 输入输出框（平行四边形），适合流程图中的 I/O 操作
- {o} - 椭圆形，用于流程图的开始/结束节点
- {tr} - 梯形（Trapezoid），用于手动操作或数据准备步骤

颜色标记（3 位或 6 位十六进制）：
- cXXX - 填充颜色，如 cRED, cBLU, cGRE, c0F0（浅绿）
- cXXXXXX - 6 位十六进制，如 cFF0000（红色）
- 标记位置: 放在框内任意位置，如 {d} cRED
- 预定义颜色: cRED, cGRE, cBLU, cYEL, cPNK, cGRA

## 高级语法
- 点状线: 用 . 或 : 绘制，如 .----. 或 :----:
- 粗线: 用 # 或 = 绘制，如 #----# 或 =----=
- 分离线: --+ 产生分离效果（不连接到交叉点）
- 圆形节点: /--\ 和 \--/ 缩小形成圆形
- 文本对齐: 默认居中，无法手动控制
- 多行文本: 框内直接换行即可
- 阴影效果: 默认启用，可通过参数关闭

箭头变体：
- --> 标准实线箭头
- ==> 粗箭头（强调）
- o--> 圆形端点箭头（聚合）
- <--> 双向箭头
- --o 圆形端点（聚合关系）
- --* 星号端点（组合关系）

边框样式：
- +----+ 实线矩形
- :----: 点线矩形
- #----# 粗线矩形
- /----\ 圆角矩形（顶部）
- \----/ 圆角矩形（底部）

## Kroki 限制
- ✓ 完全支持所有特殊标记 {d}/{s}/{c}/{io}/{o}/{tr}
- ✓ 支持颜色标记 cXXX 格式
- ✓ 支持所有线型（实线、虚线、点线、粗线）
- ⚠️ 图表尺寸建议 ≤ 50x50 字符（太大渲染慢）
- ⚠️ 复杂交叉点可能需要手动调整 + 位置
- ⚠️ 使用 --no-separation 参数可移除框之间的分隔
- ⚠️ 使用 --no-shadows 参数可禁用阴影

## 常见错误
- 框未闭合
  * ❌ +----+
       |文本
  * ✓ +----+
       |文本|
       +----+

- 箭头格式错误
  * ❌ -> （单横线，可能识别为普通线）
  * ✓ --> （双横线，明确箭头）

- 特殊标记位置错误
  * ❌ {d}+----+（标记在框外）
  * ✓ +----+
       | {d}|
       +----+

- 连接线断开
  * ❌ +----+  +----+（中间有空格）
  * ✓ +----+--+----+（用 - 连接）

- 颜色拼写错误
  * ❌ cRED1（无效颜色）
  * ✓ cRED 或 cF00（有效颜色）

最佳实践：
- 保持框的宽度一致，视觉效果更好
- 使用 + 明确标记交叉点
- 特殊标记放在框内第一行
- 颜色标记放在特殊标记后面
- 复杂图表先画主框架，再添加连接线
- 使用空行分隔不同的逻辑区域


## 示例

### 示例 1

```ditaa
+--------+   +-------+    +-------+
    |        |   |       |    |       |
    | 客户端 +-->| 网关  +--->| 服务  |
    |        |   |       |    |  {s}  |
    +--------+   +-------+    +-------+
```

### 示例 2

```ditaa
/--------\     :--------:
| 开始   |     | 判断   |
| {o}    +---->| {c}    |
\--------/     :--------:
                   |
                   v
              /--------\
              | 处理   |
              | {io}   |
              \--------/
                   |
                   v
              +--------+
              | 存储   |
              | {s}    |
              | cGRE   |
              +--------+
```

### 示例 3

```ditaa
+-----------+     +-----------+
|           |     |           |
|  数据库   |<--->|  缓存     |
|  {s}      |     |  {s}      |
|  cBLU     |     |  cYEL     |
+-----------+     +-----------+
      ^                 ^
      |                 |
      +--------+--------+
               |
          +-----------+
          |  应用层   |
          |  {d}      |
          +-----------+
```

### 示例 4

```ditaa
+--------+   +-------+    +-------+
    |        | --+ ditaa +--> |       |
    |  Text  |   +-------+    |diagram|
    |Document|   |!magic!|    |       |
    |     {d}|   |       |    |       |
    +---+----+   +-------+    +-------+
        :                         ^
        |       Lots of work      |
        +-------------------------+
```

### 示例 5

```ditaa
/------------------\
|  微服务架构      |
|       {o}        |
\------------------/
         |
         v
    +---------+
    | API网关 |
    | cPNK    |
    +---------+
    /    |    /     |     v      v      v
+---+  +---+  +---+
|用户|  |订单|  |支付|
|{s} |  |{s} |  |{s} |
|cBLU|  |cGRE|  |cYEL|
+---+  +---+  +---+
```

### 示例 6

```ditaa
:--------:     :--------:
| 输入   |---->| 验证   |
| {io}   |     | {c}   |
:--------:     :--------:
                   |
          +--------+--------+
          |                 |
          v                 v
     +--------+        +--------+
     | 成功   |        | 失败   |
     | {d}    |        | {d}    |
     | cGRE   |        | cRED   |
     +--------+        +--------+
```
